# DIAGRAMA DE ARQUITECTURA - RUMI

## ๐๏ธ Arquitectura del Sistema

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        FRONTEND (React)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ            โ
โ  โ   Pรกginas   โ  โ Componentes โ  โ   Context   โ            โ
โ  โ             โ  โ             โ  โ             โ            โ
โ  โ โข Home      โ  โ โข Header    โ  โ โข Auth      โ            โ
โ  โ โข Login     โ  โ โข CourseCardโ  โ โข User      โ            โ
โ  โ โข Register  โ  โ โข Quiz      โ  โ โข Progress  โ            โ
โ  โ โข Courses   โ  โ โข Games     โ  โ             โ            โ
โ  โ โข Profile   โ  โ โข Forms     โ  โ             โ            โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ            โ
โ           โ               โ               โ                   โ
โ           โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ                   โ
โ                           โ                                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                    Services Layer                       โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ    API      โ  โ   Auth      โ  โ   Utils     โ     โ   โ
โ  โ  โ  (Axios)    โ  โ  Service    โ  โ  Service    โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โ HTTPS/API Calls
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      BACKEND (Node.js)                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                    Express Server                       โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ   CORS      โ  โ   JSON      โ  โ   Auth      โ     โ   โ
โ  โ  โ Middleware  โ  โ Parser      โ  โ Middleware  โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                           โ                                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                     Routes Layer                        โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ   Auth      โ  โ   Courses   โ  โ   Quizzes   โ     โ   โ
โ  โ  โ   Routes    โ  โ   Routes    โ  โ   Routes    โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ   Users     โ  โ   Progress  โ  โ    Games    โ     โ   โ
โ  โ  โ   Routes    โ  โ   Routes    โ  โ   Routes    โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                           โ                                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                   Controllers Layer                     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ   Auth      โ  โ   Course    โ  โ   Quiz      โ     โ   โ
โ  โ  โ Controller  โ  โ Controller  โ  โ Controller  โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ   User      โ  โ   Progress  โ  โ    Game     โ     โ   โ
โ  โ  โ Controller  โ  โ Controller  โ  โ Controller  โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                           โ                                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                    Middleware Layer                     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โ  โ   Auth      โ  โ    Role     โ  โ Validation  โ     โ   โ
โ  โ  โ Middleware  โ  โ Middleware  โ  โ Middleware  โ     โ   โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โ Database Operations
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    DATABASE (MongoDB)                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ            โ
โ  โ    Users    โ  โ   Courses   โ  โ   Quizzes   โ            โ
โ  โ             โ  โ             โ  โ             โ            โ
โ  โ โข _id       โ  โ โข _id       โ  โ โข _id       โ            โ
โ  โ โข name      โ  โ โข title     โ  โ โข title     โ            โ
โ  โ โข email     โ  โ โข desc      โ  โ โข questions โ            โ
โ  โ โข password  โ  โ โข teacher   โ  โ โข courseId  โ            โ
โ  โ โข role      โ  โ โข lessons   โ  โ โข createdBy โ            โ
โ  โ โข progress  โ  โ โข students  โ  โ             โ            โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ            โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ            โ
โ  โ   Progress  โ  โ    Games    โ  โ   Grades    โ            โ
โ  โ             โ  โ             โ  โ             โ            โ
โ  โ โข _id       โ  โ โข _id       โ  โ โข _id       โ            โ
โ  โ โข user      โ  โ โข user      โ  โ โข user      โ            โ
โ  โ โข course    โ  โ โข game      โ  โ โข course    โ            โ
โ  โ โข completed โ  โ โข stats     โ  โ โข quiz      โ            โ
โ  โ โข scores    โ  โ โข createdAt โ  โ โข score     โ            โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Flujo de Datos

### 1. Autenticaciรณn
```
Usuario โ Frontend โ API Call โ Auth Controller โ User Model โ JWT Token โ Frontend Storage
```

### 2. Creaciรณn de Curso
```
Docente โ Course Form โ API Call โ Course Controller โ Course Model โ MongoDB โ Response
```

### 3. Inscripciรณn a Curso
```
Estudiante โ Course List โ API Call โ Course Controller โ Update Course โ MongoDB โ Response
```

### 4. Juego Educativo
```
Usuario โ Game Component โ API Call โ Game Controller โ GameSession Model โ MongoDB โ Stats
```

## ๐ Seguridad

### Autenticaciรณn
- **JWT Tokens**: Manejo de sesiones
- **bcrypt**: Hash de contraseรฑas
- **Middleware**: Validaciรณn de tokens

### Autorizaciรณn
- **Role-based Access**: estudiante/docente/admin
- **Route Protection**: Middleware por roles
- **Resource Ownership**: Validaciรณn de propiedad

### Validaciรณn
- **Input Validation**: Sanitizaciรณn de datos
- **CORS**: Configuraciรณn de orรญgenes
- **Error Handling**: Manejo de errores estructurado

## ๐ Escalabilidad

### Actual (Vertical)
- Single Node.js instance
- MongoDB single instance
- Static file serving

### Propuesta (Horizontal)
- Load Balancer (Nginx)
- Multiple Node.js instances
- MongoDB cluster
- Redis cache
- CDN for assets

## ๐ Deployment

### Desarrollo
- Frontend: Vite dev server (localhost:5173)
- Backend: Express server (localhost:3000)
- Database: MongoDB local/Atlas

### Producciรณn
- Frontend: Static build + CDN
- Backend: Docker containers + Load balancer
- Database: MongoDB Atlas cluster
- Monitoring: Application insights 